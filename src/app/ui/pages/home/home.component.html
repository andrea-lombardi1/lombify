<div class="toolbar">
  <div class="start">
    <p-button [routerLink]="'/collection'" [style]="{ height: '40px' }">
      <span class="material-symbols"> favorite </span>
      <span>Preferiti</span>
    </p-button>
  </div>
  <div class="center">
    <input
      pInputText
      placeholder="Search"
      [(ngModel)]="searchService.query"
      (input)="searchService.search()"
      aria-label="search"
      style="width: 100%; max-width: 32rem; height: 40px"
      [class.ng-invalid]="searchService.query.length < 3"
    />
  </div>
  <div class="end">
    <p-select
      [options]="searchService.stateOptions"
      [(ngModel)]="searchService.entity"
      optionLabel="label"
      optionValue="value"
      [showClear]="true"
      placeholder="Filtra per..."
      aria-labelledby="basic"
      (onChange)="searchService.search()"
      [style]="{ height: '40px' }"
    />
  </div>
</div>
<div class="divider"></div>
@if (searchService.query.length < 3) {
<div class="hero">
  <div class="card">
    <img src="./logo.png" alt="Card" style="margin: auto; max-width: 30rem" />
    <h1>Benvenuto su Lombify</h1>
    <p>Per la ricerca, scrivi almeno 3 caratteri... buon ascolto!</p>
  </div>
</div>
} @else if (searchService.loadingComp()) {
<div class="hero">
  <app-spinner></app-spinner>
</div>
} @else if (searchService.dataComp().length === 0) {
<p-card [style]="{ width: '30rem', overflow: 'hidden', margin: 'auto' }">
  <p-header>
    <img
      src="https://i1.wp.com/potafiori.com/wp-content/uploads/2020/04/placeholder.png?ssl=1"
      alt="Card"
      style="max-width: 30rem"
    />
  </p-header>
  <h1>0 risultati</h1>
  <p>Non ci sono risultati per la tua ricerca... prova con qualcos'altro!</p>
</p-card>
} @else { @if (!searchService.entity) {
<app-table [data]="searchService.dataComp()" [type]="'picture'"></app-table>
} @else if (searchService.entity === 'artist') {
<!-- Table -->
<app-table [data]="searchService.dataComp()" [type]="'char'"></app-table>
} @else if (searchService.entity === 'collection') {
<!-- Card grid -->
<div
  class="card-grid"
  style="
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 0 0 0 16px;
    width: calc(100% - 32px);
  "
>
  @for (album of searchService.dataComp(); track album.collectionId) {
  <div
    class="card"
    style="
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    "
  >
    <img
      [src]="album.artworkUrl100"
      alt="Card"
      style="width: 100%; height: auto; border-radius: 8px"
    />
    <h1 style="font-size: 1.2rem; margin: 0.5rem 0">
      {{ album.collectionName }}
    </h1>
    <p style="font-size: 1rem; color: gray">{{ album.artistName }}</p>
  </div>
  }
</div>
} @else if (searchService.entity === 'track') {
<!-- Card grid -->
<div
  class="card-grid"
  style="
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  "
>
  @for (track of searchService.dataComp(); track track.trackId) {
  <div
    class="card"
    style="
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    "
  >
    <img
      [src]="track.artworkUrl100"
      alt="Card"
      style="width: 100%; height: auto; border-radius: 8px"
    />
    <h1 style="font-size: 1.2rem; margin: 0.5rem 0">{{ track.trackName }}</h1>
    <p style="font-size: 1rem; color: gray">{{ track.artistName }}</p>
    <div
      style="
      margin-top: auto;
      width: 100%;
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      "
    >
      <p-button
      severity="secondary"
      [style]="{
        'font-size': '1.5rem',
        padding: '1rem',
      }"

      >
      <span [class.material-symbols]="track.favorite" [class.material-symbols-outlined]="!track.favorite" style="font-size: 2rem">
        favorite
      </span>
      </p-button>
      <p-button
      severity="secondary"
      [style]="{
        'font-size': '1.5rem',
        padding: '1rem',
      }"
      >
      <span class="material-symbols-outlined" style="font-size: 2rem">
        play_circle
      </span>
      </p-button>
    </div>
  </div>
  }
</div>
} }
